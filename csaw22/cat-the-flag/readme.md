# Description
Title: Cat the Flag

Provided files
- X_test.pkl
- X.pkl
- y.okl

# Process
I had no experience with training neural networks and I didn't know what to do with .pkl files so I started by looking up how to open them and found that they are generated by [pickle](https://docs.python.org/3/library/pickle.html), a python library for object serialization.

One I had loaded them in I looked up how to display pickle files which isn't really an educated line of inquiry but lead me to find an [example](https://stackoverflow.com/questions/24906126/how-to-unpack-pkl-file) of someone loading data from pkl files and displaying them with matplotlib.

![catsAndDogs](https://storage.googleapis.com/kaggle-competitions/kaggle/3362/media/woof_meow.jpg)

This revealed that the X_test.pkl was a set of 288 80x80 RGB images of cats and dogs. A quick search for cat vs dog classifiers showed that it was a very common problem and kaggle had run this [contest](https://www.kaggle.com/c/dogs-vs-cats) that had a lot of published solutions I could understand and implement.

The last hurdle was the upload. It took a lot of trial and error to discern that the file had to me model.h5.zip for it to be accepted.

# Solution
This challenge provided the flag in the form of X_test.pkl, a set of 288 images encoded with the python pickle library. The images are of cats and dogs and the flag is encoded as the 288 classifications with 0 for cats and 1 for dogs.

![Alt text](https://storage.googleapis.com/kaggle-competitions/kaggle/3362/media/please_dont_cheat.jpg)

A training dataset of 648 images is provided in X.pkl with labels provided in y.pkl such that for any X.pkl[i], y.pkl[i] is 0 if X.pkl[i] is a cat and 1 if X.pkl[i] is a dog.

```python
model = Sequential()
model.add(Conv2D(32, (3,3), activation='relu', input_shape=(80,80,3))) # Inputs are 80 x 80 RGB images
model.add(MaxPooling2D((2,2))) # Add Maxpooling layers to reduce dimensionality
model.add(Conv2D(64, (3,3), activation='relu'))
model.add(Flatten())
model.add(Dense(128, activation='relu'))
model.add(Dense(1, activation='sigmoid')) # Final layer just outputs 1 bit classification
```

Our solution was to use tensorflow to train a convolutional neural network image classifier with the configuration shown above to close to perfectly fit the training data, then use that model to classify the images in X_test.pkl. This generates an 288 floating point vales that we then rounded to the nearest integer and converted into character bytes in 8 bit blocks.

Converting the classification yields a flag in the format
```
CSAW_CTF{...} 
```
which is not the correct flag. The correct flag just has flag instead of CSAW_CTF at the start and the rest is identical.
```
flag{...}
```
You can just guess this but the intended solution is to zip and upload a h5 formatted model file to http://misc.chal.csaw.io:5000/ where it is checked by classifying 9 more images and the correct flag is printed out.